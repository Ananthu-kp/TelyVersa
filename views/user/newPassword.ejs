<%- include("../partials/header") %>

<div class="col-lg-4 offset-lg-4">
    <div class="login_wrap widget-taber-content p-30 background-white border-radius-10 mb-md-5 mb-lg-0 mb-sm-5">
        <div class="padding_eight_all bg-white">
            <div class="heading_s1">
                <h3 class="mb-30">Forget Password</h3>
            </div>
            <form method="post" action="/newpass" onsubmit="return validateForm(event)">
                
               
                <div class="form-group">
                    <input type="password" name="password" id="password1" placeholder="New Password" onkeyup="validatePassword()">
                    <div id="password_error" class="alert alert-danger" style="display: none;"></div>
                </div>
                <div class="form-group">
                    <input type="password" name="confirmpassword" id="password2" placeholder="Confirm Password" onkeyup="validateConfirmPassword()">
                    <div id="confirmPassword_error" class="alert alert-danger" style="display: none;"></div>
                </div>
                
              
                <div class="form-group">
                    <button type="submit" class="btn btn-fill-out btn-block hover-up" name="login">Enter</button><br>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    const password = document.getElementById("password1");
    const confirmPassword = document.getElementById("password2");

    const password_error = document.getElementById("password_error");
    const confirmPassword_error = document.getElementById("confirmPassword_error");

    function validatePassword() {
        const minLength = 6;
        const passwordValue = password.value.trim();

        if (passwordValue.length < minLength) {
            password_error.textContent = "Password must have at least 6 characters";
            password_error.style.display = "block";
            return false;
        } else {
            password_error.style.display = "none";
            return true;
        }
    }

    function validateConfirmPassword() {
        const passwordValue = password.value.trim();
        const confirmPasswordValue = confirmPassword.value.trim();

        if (passwordValue !== confirmPasswordValue) {
            confirmPassword_error.textContent = "Passwords do not match";
            confirmPassword_error.style.display = "block";
            return false;
        } else {
            confirmPassword_error.style.display = "none";
            return true;
        }
    }

    function validateForm(event) {
        // Reset error messages
        password_error.style.display = "none";
        confirmPassword_error.style.display = "none";

        // Validate password
        const isPasswordValid = validatePassword();

        // Validate confirm password
        const isConfirmPasswordValid = validateConfirmPassword();

        // If any validation fails, prevent form submission
        if (!isPasswordValid || !isConfirmPasswordValid) {
            event.preventDefault();
            return false;
        }

        // All validations passed
        return true;
    }
</script>

<%- include("../partials/footer") %>
